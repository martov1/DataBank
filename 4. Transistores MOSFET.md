**TO-DO:**

Con lo aprendido hasta ahora deberia ser capaz de interpretar las lectures de razavi y entender bien el amplificado MOSFET
* [Entender bien mosfets](https://www.youtube.com/watch?v=jfizMWm3Q0I&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=4)

* [channel length modulation de ranzabi](https://www.youtube.com/watch?v=jfizMWm3Q0I&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=4)

# Tipos de transistores

Existen varios tipos de transistores **FET**
![](https://i.imgur.com/tbpThOx.png)
# Intuicion

## Intro

[fuente](https://www.youtube.com/watch?v=h8VcISK7y3w&list=PLb_ph_WdlLDny2cGloFSxyRgO8B733jeo&index=86)


los **MOSFET** tienen el siguiente diagrama, segun sea de **enriquecimiento, empobrecimiento, NPN o PNP**

**CRITICO:**
Se trata de un transistor que **controla la corriente desde drain a source** $I_{d}$ de **forma proporcional a la tension** $V_{gs}$

![](https://i.imgur.com/GLbIXc6.png)


## Estructura interna y el body-diode
[fuente](https://www.youtube.com/watch?v=F485AB1B1_Y)
La estructura interna es la siguiente:
![](https://i.imgur.com/9y5p803.png =300x)
En una primera inspeccion vemos que se trataria de dos diodos **PN** opuestos que jamas conduciran
![](https://i.imgur.com/m4UTVfW.png =300x) 
Pero si vemos como estan conectados, vemos que hay un cable saliendo del **source** y entrando al otro lado del **P-type**.
Esto significa que el segundo diodo queda cortocircuitado y nos queda un diodo entre **drain y source**

Este es el conocido "**body diode**" que hace que el mosfet conduzca si esta conectado al reves.
![](https://i.imgur.com/OdVsoeo.png =300x)

## Deduccion de la zona lineal
[fuente 1 - Intro](https://www.youtube.com/watch?v=F485AB1B1_Y)
[fuente 2 - relacion entre fisica y regiones de operacion](https://www.youtube.com/watch?v=rkbjHNEKcRw)

Al aplicar una tension $V_{gs}$ se forma un capacitor interno
![](https://i.imgur.com/NDYBE0Q.png =300x)
Recordamos que el **P-type** tiene ausencia de electrones y por eso no puede conducir.
1. El capacitor se carga mas y mas
2. A medida que se carga, se apilan electrones en donde se tocan el **P-type** y el **metal oxyde**.
3. **Despues de cierta cantidad de carga el P-type llena todos sus agujeros y se genera un canal de exceso de electrones en el P-type  que permite la conduccion**.

**CRITICO:** La tension a la que se llenan todos los agujeros del **P-type** y a partir de la cual se apilan electrones libres que permiten la conduccion se llama  **threshold** o $V_{th}$

![](https://i.imgur.com/PZKtudT.png =400x)
Cuanto as $V_{gs}$,  **mas cargado esta el capacitor, menor resistencia tiene el canal ya que es mas ancho y hay mas electrones para mover**
A esa resisencia la llamamos $R_{dsOn}$

![](https://i.imgur.com/TWgxwKX.png =400x)
**Osea que:** 
1. Cuando $V_{gs}>V_{th}$ se empieza a formar un canal.
1. $V_{gs}-V_{th}>0$ determina el ancho del canal
2.  El ancho del canal determina $R_{ds}$
3.  Si variamos $V_{ds}$ este respeta la ley de ohm
$$\frac{V_{ds}}{R_{ds}}=I_d$$
A esto llamamos la **zona lineal** y esa relacion lineal se puede ver para cada valor de $V_{gs}$
![](https://i.imgur.com/1JvGijO.png)

## Deduccion de la zona de saturacion
[fuente basica](https://www.youtube.com/watch?v=XU6nzTPZUEg&t=145s)

>**Recordamos** 
>1. Tenemos un  **Diodo PN junction** entre el **body** y el **drain**. Como el body esta conectado al **source** vemos que basicamente tenemos un diodo entre **Drain y source**.
	* ![](https://i.imgur.com/OdVsoeo.png =250x)
>2. Una **PN junction polarizada inversamente** genera un **depletion zone** que hace que el **P-type** material no tenga cargas libres y **entonces no conduce** (por eso los diodos no conducen)

**Se estan generando dos regiones contrapuestas**
1. **El channel**, que es una region de abundantes electrones para conducir
	* Generado por $V_{gs}-V_{th}$
2. **La depletion region** que es una region con ausencia de electrones para conducir
	* Generada por $V_{ds}$ que polariza inversamente el diodo ente drain y source

![](https://i.imgur.com/FvoNpmZ.png =400x)
A medida que crece la **depletion region** se va estrangulando el **channel**, cuando ambos son equialentes el channel se transforma en un triangulo y la corriente **deja de crecer independientemente de** $V_{ds}$


Las regiones tienen fuerzas similares cuando las tensiones que los generan son iguales
$$\boxed{V_{ds}=V_{gs}-V_{th}}$$

En en punto aunque  $V_{ds}$ crezca mas, $I_{ds}$ se queda en un valor casi fijo. Llamamos aesa tension **tension de saturaion** $V_{gsSat}$

Podemos apreciar como $I_d$ deja de cambiar con aumentos de $V_{ds}>V_{dsSat}$

![](https://i.imgur.com/SwKlfJJ.png)



 ## PMOS vs NMOS

[fuente](https://www.youtube.com/watch?v=6wuvhVQHq-s)
Las diferencias elemental entre un **P-MOSFET** y un **N-MOSFET** son:

* **P-MOS**
	* Si $V_{gs}>V_{th}$ entonces **NO** deja pasar corriente
	* Controla la corriente que fluye de **SOURCE A DRAIN**
	* fisicamente de **tamaño mayor**
	* **Tiempos** de respuesta mas **cortos**
	* Manejan **menores corrientes**
	* mas **caro**
* **N-MOS**
	* Si $V_{gs}>V_{th}$ entonces **SI** deja pasar corriente
	* Controla la corriente que fluye de **DRAIN A SOURCE**
	* fisicamente de **tamaño menor**
	* **tiempos** de respuesta mas **rapidos**
	* Manejan **mayores corrientes**
	* Mas **barato**

![](https://i.imgur.com/z7X5beC.png)_NMOS y PMOS dejan pasar la corriente en situaciones opuestas_

![](https://i.imgur.com/KTxOjG3.png)_NMOS controla la corriente de drain a source, mientras que PMOS controla la corriente de source a drain_


# Equaciones

## Ecuacion del MOSFET

[fuente supler clara](https://www.youtube.com/watch?v=QCIDcB034Eg&t=35s)


Ahora analicemos el funcionamiento de un MOSFET para tratar de obtener una funcion que determine $I_d$

![](https://i.imgur.com/PidmWFq.png =300x)
>**Recordemos** que para que un elemento conduzca necesita tener _electrones libres_.
>
>Añadimos electrones al **P-type** cargando el capacitor, esos electrones _libres_ son los que permiten que circule una corriente.

1. La capacitancia $C_{gd}$ del MOSFET  nos determina la cantidad de electrones que quedan flotando en el **P-type**  $Q_{libres}$  y que permiten la conduccion. 
2. La cantidad de electrones libres  $Q_{libres}$ flotando en el **P-type** nos determina la corriente maxima $I_d$ que podemos desplazar.

**Recordamos:** la definicion de corriente 
$$I_d=\frac{dQ}{dt}\approx \frac{\Delta Q}{\Delta t}$$

Entonces si sabemos cuanto tarda una carga equivalente a $Q_{libres}$ en circular, sabremos la corriente $I_d$ maxima
$$(1)\quad  I_d\approx \frac{Q_{libres}}{t_{\text{que tarda Q en circular}}}$$

Ademas notamos que: 
$$(2)\quad  t_{\text{que tarda Q en circular}}\approx\frac{\text{distancia del canal}}{\text{Velocidad de las cargas}}$$
Por cuestiones fisicas la velocidad de circulacion de las cargas esta definida por 
$$(3)\quad \text{velocidad de las cargas}=\mu_QE$$
Donde:
* $\mu_Q$ movilidad del material
* $E$ Campo electrico en el sentido de circulacion de la corrente (entre **drain y source**)

Reemplazando $(3)$ en $(2)$ y llamando $L$ a la distancia del canal

$$ (4) \quad t_{\text{que tarda Q en circular}}\approx\frac{L}{\mu_QE}$$

Reemplazando $(4)$ en $(1)$
$I_d\approx \frac{Q_{libres}}{\frac{L}{\mu_QE}}$
$$(5) \quad I_d\approx \frac{Q_{libres}\mu_QE}{L{}}$$

>Recordamos que conocemos $Q_{libres}$, por que es la cantiad de cargas que el capacitor logro generar **despues de llenar los agujeros del P-type**
>Desde la equacion del capacitor
>$C=\frac{Q}{V}$ 
>$Q=CV$
>A la tension en el capacitor le tenemos que restar la tension minima para **llenar los agujeros del P-Type**, que es cuando $Q_{libres}=0$
>$$(6) \quad Q_{libres}=C(V_{cap}-V_{th})$$

Reemplazando $(6)$ en $(5)$

$$I_d\approx \frac{\frac{C}{V_{cap}-V_{th}}\mu_QE}{L{}}$$
$$(7) \quad I_d\approx \frac{C(V_{cap}-V_{th})\mu_QE}{L}$$


>**Recordamos** como se calcula la capacitancia de un capacitor de placas
>$$\quad C=\text{permitividad del material} \frac{\text{area de placas}}{\text{distancia entre placas}}$$
osea
$$(8) \quad\quad C=\epsilon \frac{A_{rea}}{D_{istancia-del-oxido}}=\epsilon\frac{W_{idth}L_{ength}}{D_{oxido}}$$

Reemplazando $(8)$ en $(7)$

$$I_d\approx \frac{\epsilon \frac{WL}{D_{oxido}}(V_{cap}-V_{th})\mu_QE}{L}$$
$$(7) \quad I_d\approx \frac{\epsilon WL\mu_QE}{LD_{oxido}}(V_{cap}-V_{th})$$


>**Recordamos** la formula para el campo electrico entre dos puntos es
>$$(8) \quad E=\frac{V_{\text{entre los dos puntos}}}{D_{istancia}}$$

Reemplazando $(8)$ en $(7)$. notamos que el campo electrico que se forma es entre **drain** y **source**

$$I_d\approx \frac{\epsilon WL\mu_Q\frac{V_{ds}}{L}}{LD_{oxido}}(V_{cap}-V_{th})$$


$$ I_d\approx \frac{\epsilon WL\mu_Q}{L^2D_{oxido}}V_{ds}(V_{cap}-V_{th})$$

Por simplicidad renombramos  $k=\frac{\epsilon WL\mu_Q}{L^2D_{oxido}}$ ya que son valores **constantes** para un dispositivo dado

$$(7) \quad I_d\approx kV_{ds}(V_{cap}-V_{th})$$

> Vemos que $V_{cap}$ es la tension en el capacitor, es decir, la diferencia entre el gate y el channel
>$$V_{cap}=V_{g}-V_{channel}$$
> 
> Necesitamos obtener la tension del channell
> ![](https://i.imgur.com/oEOwktd.png =300x)>
>Podemos estimar $V_c$ como el punto medio entre las tensiones $V_s$ y $V_d$  entre dos resistores iguales.
>$$ \quad V_{channel}\approx \frac{V_s+V_d}{2}$$
> Entonces
>$$(8) \quad V_{cap}\approx V_g-\frac{V_s+V_d}{2}$$
>![](https://i.imgur.com/KfefCjZ.png)>


Reemplazando $(8)$ en $(7)$

$$ I_d\approx kV_{ds}(V_g-\frac{V_s+V_d}{2}-V_{th})$$

**Con un poco de algebra se reacomoda**

_divido la fraccion_
$$ I_d\approx kV_{ds}(V_g-\frac{V_s}{2}+\frac{V_d}{2}-V_{th})$$

_sumo 0 en forma de_ $\frac{V_s}{2}-\frac{V_s}{2}$
$$ I_d\approx kV_{ds}(V_g-\frac{V_s}{2}+\frac{V_d}{2}+(\frac{V_s}{2}-\frac{V_s}{2})-V_{th})$$

_Reordenando_
$$ I_d\approx kV_{ds}(V_g-(\frac{V_s}{2}+\frac{V_s}{2})+(\frac{V_d}{2}-\frac{V_s}{2})-V_{th})$$

_queda_
$$ I_d\approx kV_{ds}(V_g-V_s+\frac{1}{2}(V_d-V_s)-V_{th})$$
_Entonces_
$$ I_d\approx kV_{ds}(V_{gs}-\frac{1}{2}V_{ds}-V_{th})$$

**CONCLUSION:**
_Hago distributiva y reordeno_ **quedando** entonces la equacion que relaciona $I_d$, $V_{ds}$ y $V_{gs}$
$$\boxed{I_d\approx k((V_{gs}-V_t)V_{ds}-\frac{1}{2}V_{ds}^2)}$$


## Equacion y la zona lineal /ohmica
[fuente?](https://www.youtube.com/watch?v=xIvMhAWDIog)
A partir de la equacion deduciremos las diferentes partes del grafico de zonas de operacion. 
$$\boxed{I_d\approx k((V_{gs}-V_{th})V_{ds}-\frac{1}{2}V_{ds}^2)}$$

**Notamos que** tanto $k$ como $V_{th}$ son constantes, entonces la funcion $I_d$ es una **funcion de dos variables**.

$$\boxed{I_d (V_{gs},V_{ds}) \approx k((V_{gs}-V_t)V_{ds}-\frac{1}{2}V_{ds}^2)}$$

## Equacion y la zona de saturacion

### Tension y cargas no homogeneas
[fuente - Por que se produce la saturacion?](https://www.youtube.com/watch?v=ZuqSnHndXLY)
[fuente 2](https://www.youtube.com/watch?v=ggb1600vS84)
Recordamos el fenomeno de **pinchoff** en el que el canal se va haciendo **mas triangular** con el aumento de $V_{ds}$.



![](https://i.imgur.com/FvoNpmZ.png =200x)
Para comprender mas en detalle este fenomeno, **recordamos** la ecuacion de carga del capacitor MOS y tambien la equacion de tension del capacitor mos. las mismas fueron derivadas en la seccion de "equacion del mosfet".

$$(1) \quad Q_{libres}=C(V_{cap}-V_{th})$$
$$(2) \quad V_{cap}\approx V_{gs}-\frac{V_s+V_d}{2}$$

**Notamos que:**
Esas equaciones _suponen_ que el capacitor es **homogeneo y simetrico**, pero notamos que ese **no es el caso, es trapezoidal y en casos extremos, triangular**. 

Como la tension no sera homogenea, **no podemos usar el promedio de la tension** $\frac{V_s+V_d}{2}$.

En cambio tenemos que hablar una funcion  $V_{cs}(x)$ que indica la tension entre el punto $X$ del **canal** y el **source**.
![](https://i.imgur.com/rJRHIcr.png =300x)
**La equacion** $(2)$ **quedaria asi:**
$$(3) \quad V_{cap}(x) = V_{gs}-V_{cs}(x)$$
_la tension entre las placas del capacitor cambia dependiendo de la posicion en X en las placas_
**Esto implica que:**
La carga del capacitor $Q$ varia segun la posicion en $X$
$$(1) \quad Q_{libres}(x)=C(V_{cap}(x)-V_{th})$$

**Reemplazando** $(3)$ y $(4)$ nos queda

$$ Q_{libres}(x)=C(V_{g}-V_{cs}(x)-V_{th})$$
**Tenemos una expresion que nos dice la carga en cada punto $X$ del capacitor**
$$\boxed{(4) \quad Q_{libres}(x)=C([V_{g}-V_{th}]-V_{cs}(x))}$$

**Notamos que:** 
1. **Trivial:** La tension $V_{ds}$ es por definicion una caida de tension desde $V_{d}$ hasta $V_{s}$ a lo largo de la distancia $X$ del canal
2. **Entonces**  $V_{cs}(x)$ 
	* **Comienza en** $V_d$ al comienzo del canal 
	*  **Baja** a medida que avanzamos en $X$
	*  **Hasta** llegar a $V_s$ al final del canal
 $$\boxed{(5) \quad V_{s}\leq V_{cs}(x) \leq V_{d} \quad \forall x}$$
3. **Entonces:** La cantidad de carga $Q$ va **subiendo** a medida que avanzamos en $X$ y $V_{cs}$ se hace mas chiquito, por que vemos que $V_{cs}$ **esta restando** en $(4)$
$$Q_{libres}(x)=C([V_{g}-V_{th}]-V_{cs}(x))$$

**Notamos entonces que** si en algun momento $V_{g}-V_{th}=V_{cs}(x)$ el canal se cierra y no hay carga en esa coordenada $X$ del capacitor.
 $$\boxed{(6) \quad Q=C([V_{g}-V_{th}]-[V_{g}-V_{th}])=0}$$

### Derivacion de la region de pinch-off



1.  **Imaginemos** que se da que  $V_{ds}>V_{g}-V_{th}$
2. **Entonces** por la equacion $(5)$ existe un punto $X$ en el canal donde $V_{cs}(x)=V_{g}-V_{th}$.
3. **Llamamos** a ese valor $V_{dsSat}$


**Entonces** en el punto $x$ en el canal donde 
$$V_{cs}(x)=V_{dsSat}=V_{g}-V_{th}$$
 Eso hace que la equacion $(3)$ se transforme en la  $(6)$ y por consiguiente **desde ese punto** $x$ **en adelante el capacitor no tiene carga** por que segun la equacion $(6)$ tenemos $Q=0$

**CRITICO:** Eso significa que en el canal, desde el punto $x$ donde $V_{cs}(x)=V_{dsSat}$ hasta el **drain** hay un **depletion zone** sin electrones libres.  


![](https://i.imgur.com/3OZTktB.png)
**VEMOS QUE:**
Para que la corriente pueda atravesar el **depletion zone** entre $X$ y **drain** que queda donde no hay electrones (por que $Q(x)=0$), se genera la caída de potencial entre $V_{ds}-V_{sat}$ similar a la de un diodo.

**A partir de** $V_{dsSat}$ **en adelante no estas agrandando el canal, sino que estas agrandando la depletion region** y el canal queda con una carga $Q$ **fija**, por eso la corriente $I_d$ deja de crecer.

**CONCLUIMOS QUE:**
La corriente $I_d$ que atraviesa el mosfet es la misma que cuando $V_{ds}=V_{dsSat}=V_{g}-V_{th}$.
La tensión que supera $V_{dsSat}$ **cae en la depletion zone**, que se hace mas grande a medida que $V_{ds}>V_{g}-V_{th}$.
Osea que la tension sobrante se disipa en forma de calor tratando de atraesar el depletion zone.

![](https://i.imgur.com/1AJ0mtq.png)
###  Conclusion y equacion
A partir de  $V_{dsSat}$, que es   $V_{ds}=V_{g}-V_{th}$ la corriente $I_d$ queda trabada en su ultimo valor.


Aumentar $V_{ds}$ mas alla de $V_{dsSat}$ 
* No aumenta la carga $Q$ del capacitor ypor ende tampoco la cirrient $I_d$
* Aumenta una **depletion zone** 
* Esta se va comiendo la diferencia entre $V_{dsSat}$ y $V_{ds}$. Esa caida no aporta al movimiento de la corriente (similar a como la caida de $0.7V$ de un diodo no respeta la ley de ohm y no hace circular una corriente )

Recordando la formula para $I_{d}$ y evaluandola cuando $V_{ds}=V_{dsSat}=V_{g}-V_{th}$ obtenemos el valor al que queda clavada la corriente, aun cuando $V_{ds}$ supere ese valor.

**Recordamos**
$$\boxed{I_d (V_{gs},V_{ds}) \approx k((V_{gs}-V_t)V_{ds}-\frac{1}{2}V_{ds}^2)}$$
**Reemplazamos con** $V_{ds}=V_{g}-V_{th}$

_Notamos que ahora que $V_{ds}$ desaparecio, la funcion ahora es de una sola variable_
$$I_d (V_{gs}) \approx k((V_{g}-V_t)(V_{g}-V_{th})-\frac{1}{2}(V_{g}-V_{th})^2)$$

**CONCLUSION:**
La funcion del mosfet cuando $V_{ds}>V_g-V_{th}$ es
$$\boxed{I_d (V_{gs}) \approx k\frac{1}{2}(V_{g}-V_{th})^2}$$
y a la region dominada por esta equacion le decimos **region de saturacion**

### Channel-length modulation

[fuente - minuto 6](https://www.youtube.com/watch?v=jfizMWm3Q0I&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=4)

Llamamos channel length modulation al efecto de qque aun estando en saturacion, si aumentamos $V_{ds}$, contrario a la teoria que vimos antes, **si** hay un **leve aumento de**  $I_d$

[Este aumento depende principalemte del **largo total del channel del mosfet** y para mosfets discretos o mosfets que no estan dentro de un chip generalmente puede ser ignorado](https://electronics.stackexchange.com/questions/605577/trying-to-simulate-channel-length-modulation-effects-to-see-practical-considerat)

![](https://i.imgur.com/KiMvGk1.png =300x)
_Si no hubiera aumento de $I_d$ entonces las lineas serian horizontales en la zona de saturacion, como ejemplifica la linea roja, pero vemos que aumentan levemente_

Una vez que el canal se hace **triangular**, si continuamos aumentando $V_{ds}$ la **depletion region** aumenta y hay mas separacion entre el triangulo y el drain.
![](https://i.imgur.com/1AJ0mtq.png)

Esto implica que el **largo del canal** $L$ **se hace mas corto**

Recordamos que la equacion para la zona de saturacion es

$$\boxed{I_d (V_{gs}) \approx k\frac{1}{2}(V_{g}-V_{th})^2}$$

Donde 
$$ k=\frac{\epsilon WL\mu_Q}{L^2D_{oxido}}$$

**Observamos que**
1. Una disminuacion de $L$ generara un aumento de $k$ y por consiguiente un aumento de $I_d$
2. el aumento de $L$ esta relacionado al depletion region que se genera por aumentar $V_{ds}$ encima de $V_{dssat}$.

**Entonces:** aumentar $V_{ds}>V_{dssat}$ si generara un pequeño aumento de $I_d$ y a ese efecto lo llamamos **channel length modulation**


**Para simplificar**  los calculos se suele generar un coeficiente llamado $\lambda$ el cual se multiplica por $V_{ds}$ para representar la nueva pendiente de crecimiento. 

$$\boxed{I_d (V_{gs}) \approx k\frac{1}{2}(V_{g}-V_{th})^2  (1+\lambda V_{ds})}$$

# Curvas del MOSFET

## Relacion de transferencia
[fuente](https://www.youtube.com/watch?v=pP7WWM63Upc)
[fuente 2](https://www.youtube.com/watch?v=OTeTjdPG70Q)
Llamamos a la relacion de transferencia a la relacion entre **la entrada y la salida**. 
En el caso del mosfet
* **ENTRADA** $V_{gs}$
* **SALIDA:** $I_d$

>La otra salida ($V_{ds}$) la tomamos como un valor fijo predeterminado para poder graficar.

**RECORDAMOS:**
Que tenemos 3 relaciones entre la entrada y la salida:
* **Zona Cutoff:**
	* Ocurre cuando $V_{gs}<V_{th}$
	* $I_d=0$
* **Zona lineal**
	* Ocurre cuando  $V_{ds}<V_{gs}-V_{th}$
	* $I_d (V_{gs},V_{ds}) = k((V_{gs}-V_t)V_{ds}-\frac{1}{2}V_{ds}^2)$
	* **CRITICO:** si $V_{ds}$ es cte entonces la funcion es **una recta** 
* **Zona Saturacion**
	* Ocurre cuando  $V_{ds}>V_{gs}-V_{th}$
	* $I_d (V_{gs}) = k\frac{1}{2}(V_{g}-V_{th})^2$
	* Es **una parabola**

>**CRITICO:** 
Es importante notar que **la variable que cambia es** $V_{gs}$, mientras que $V_{ds}$ **es constante**. Eso significa que
>*  La equacion  de la **zona lineal** es **una recta**
>* La equacion de la **zona de saturacion** es **una parabola**

Si graficamos la entrada $V_{gs}$ y la salida $I_d$, cuando $V_{ds}$ se mantiene **constante** usando las tres regiones en los puntos que corresponde, tendremos la relacion entre la entrada $V_{gs}$ y la salida $I_d$.

**Notamos** que cambios de $V_{ds}$ mueven el lugar donde pasamos de la zona de saturacion a la zona lineal.
>**INTUICION:** esto tiene sentido por que **cuanto mas** $V_{gs}$ mas  **ancho el canal** y eso facilita cada vez mas el paso de los electrones. entonces tiene sentido que pases de **CUTOFF** a **SATURACION** y despues a la region **OHMICA** que es cuando mas facilmente circulan los electrones
>
![](https://i.imgur.com/NYiagzk.png =400x)

A continuacion podemos ver la caracteristica de salida en la siguiente  simulacion. notemos como
* Cambios de $V_{ds}$ mueven el lugar donde pasamos de saturacion a lineal

![](https://i.imgur.com/3EFzITZ.png)
[Simulacion](https://tinyurl.com/yboopuos)






## Caracteristica de salida

[fuente](https://www.youtube.com/watch?v=pP7WWM63Upc)
[fuente 2](https://www.youtube.com/watch?v=OTeTjdPG70Q)
Llamamos caracteristica de salida a **la relacion entre las salidas**
En el caso del mosfet:
* **SALIDA 1:** $V_{ds}$
* **SALIDA 2:** $I_{d}$

>La entrada  ($V_{gs}$) la tomamos como un valor fijo predeterminado para poder graficar.



**RECORDAMOS:**
Que tenemos 3 relaciones entre la entrada y la salida:
* **Zona Cutoff:**
	* Ocurre cuando $V_{gs}<V_{th}$
	* $I_d=0$
* **Zona lineal**
	* Ocurre cuando  $V_{ds}<V_{gs}-V_{th}$
	* $I_d (V_{gs},V_{ds}) = k((V_{gs}-V_t)V_{ds}-\frac{1}{2}V_{ds}^2)$
	* si $V_{gs}$ es cte la funcion Es **una parabola** 
* **Zona Saturacion**
	* Ocurre cuando  $V_{ds}>V_{gs}-V_{th}$
	* $I_d (V_{gs}) = k\frac{1}{2}(V_{g}-V_{th})^2$
	* Si $V_{gs}$ es cte, la funcion es  **una constante** por que depende unicamente de $V_{gs}$ y no depende de $V_{ds}$

>**CRITICO:** 
Es importante notar que ahora **la variable que cambia es** $V_{ds}$, mientras que $V_{gs}$ **es constante**. Eso significa que
>*  La equacion  de la **zona lineal** es **una parabola**
>* La equacion de la **zona de saturacion** es **una constante**

Si graficamos la **salida 1** $V_{ds}$ y la **salida 2** $I_d$, cuando **la entrada** $V_{gs}$ **se mantiene constante** usando las tres regiones en los puntos que corresponde, tendremos la caracteristica de salida.

![](https://i.imgur.com/P2uQxiB.png)
A continuacion vemos como en una simulacion donde a medida que varia la tension de la fuente varia $V_{ds}$ y esto nos permite visualizar las diferentes zonas para un $V_{gs}$ dado en un circuito  determinado
![](https://i.imgur.com/6k7p5bw.png)[simulacion](https://tinyurl.com/y7cvsr2r)

# Regiones de operacion


## Repaso
**El mosfet posee 3 zonas de operacion:**
* **Cutoff:** el MOSFET se comporta como un circuito abierto
* **Resistiva/triode:** el MOSFET se comporta como una resistencia
	* Se _parece_ a la _**region de saturacion**_ de un BJT
	* aparece cuando $V_{ds}<V{gs}-V{gs(th)}$
	* El **circuito circundandte es el que controla la corriente** $I_d$, el mosfet no la limita particularmente mas alla de $R_{dsON}$
* **Saturacion:** el MOSFET se comporta como una **fuente de corriente** que provee una corriente maxima.
	*  Es como la _**region activa**_ de un BJT
	* Aparece cuando $V_{ds}>V{gs}-V{gs(th)}$
	* El **mosfet es el que controla la corriente** $I_d$, limitandola a un techo, por eso aumenta $V_{ds}$

>:warning: - :warning: - :warning: - :warning:
>**CRITICO:**
>**saturacion en un BJT y en un MOSFET no significan lo mismo**, esto es el resultado de un desafortunado uso de lenguaje. **saturacion de un MOSFET es EQUIVALENTE a la  REGION ACTIVA de un BJT**
>:warning: - :warning: - :warning: - :warning:



Recordamos la **caracteristica de salida de un mosfet** que nos relaciona  $I_d$ y $V_{ds}$ para un $V_{gs}$ especifico. 
![](https://i.imgur.com/sSM4R0V.png =500x)
[EJEMPLO](https://tinyurl.com/ya9urmvj)
![](https://i.imgur.com/PwLcuJy.png)

## Region triode/linear/ohmica 

Se trata de la region donde **el mosfet se comporta como una resistencia de bajo valor** cuyo **valor depende de** $V_{gs}$ y se deomina $R_{dsOn}$

:warning: - :warning: - :warning:
Para un determinado $V_{gs}$ el mosfet actua como resistencia siempre que $I_d$ **este por debajo de cierto valor.**
:warning: - :warning: - :warning:

**CRITICO:**
En esta region **EL CIRCUITO CIRCUNDANTE CONTROLA LA INTENSIDAD DE** $I_d$ **MIENTRAS QUE EL MOSFET SOLO ES UNA PEQEUEÑA RESISTENCIA**, por  eso $V_{ds}$ es BAJO.


Esta es la region mas usada, por que **la caida de tension** $V_{ds}$ **es chiquita** y eso implica que se **disipa poca potencia**, osea que el **mosfet se calienta poquito y SIRVE COMO UN BUEN SWITCH**
 

![](https://i.imgur.com/Np6nlwJ.png)

En la caracteristica de salida. donde se ven $V_{ds}$ e $I_d$, se puede apreciar como el mosfet tiene un **comportamiento lineal diferente para cada valor de** $V_{gs}$. es decir, **para cada valor de** $V_{gs}$ **existe una resistencia** $R_{ds}$ **diferente**

_te das cuenta por que la resistencia es la inclinacion de cada una de las lineas de color!_

![](https://i.imgur.com/spyV4XB.png)
El datasheet ademas nos da algunos valores de resistencia de referencia para algunos  valores $V{gs}$ de ejemplo

![](https://i.imgur.com/qHQUvHQ.png)

Tambien podemos encontrar graficos de $R_{dsOn}$ con respecto a $V{gs}$, que nos dicen **como cambia la resistencia con respecto a la tension de puerta-fuente**

![](https://i.imgur.com/0AYlVb6.png)




## Region de saturacion


:warning: - :warning: - :warning:
Para un determinado $V_{gs}$ el mosfet actua como una fuente de tension siempre que $I_d$ **este por arriba de cierto valor.**
Es decir, el mosfet limita la corriente maxima $I_d$ que pasa por el
:warning: - :warning: - :warning:

En esta region **EL MOSFET CONTROLA LA INTENSIDAD MAXIMA DE** $I_d$ , y por ley de ohm entonces $V_{ds}$ tiene que subir. 

Es decir **funciona como una fuente de corriente controlada por tension**

![](https://i.imgur.com/FGPHp7s.png)





# Analisis de circuitos

## Load line
### Derivacion de la equacion 
[FUENTE](https://www.youtube.com/watch?v=VzEU5kj-Juk)

Veamos un circuito generico, vemos como **obviamente** la suma de las caidas de tension tiene que ser igual a la tension de la fuente

![](https://i.imgur.com/LEqfNTn.png =400x)
**Observamos que:** 
Trivial por KVL:
$$(1) \quad V_{fuente}=V_{resistencia}+V_{ds}$$
Trivial por ley de ohm
$$(2) \quad V_{fuente}=I_d*R+V_{ds}$$

Despejamos $I_d$

$$(3) \quad \boxed{I_d= \frac{-1}{R}V_{ds}+\frac{V_{fuente}}{R}}$$

**Entonces:**
Si $V_{fuente}$ y $R$ fueran **consantes** (que es lo normal) entonces  $I_d$ **es una recta** que depende de $V_{ds}$ 

### Construccion

Para dibujarla usaremos dos situaciones puntuales

* **cuando el transistor conduce** tengo que  $V_{ds}\approx0$ entonces
	* $(3) \quad I_{dmax} \approx 0+\frac{V_{fuente}}{R}$
Es como si el transistor **no estuviera**
![](https://i.imgur.com/0zJZCR0.png =400x)[simulacion](https://tinyurl.com/y7anrlrj)

* **Cuando el transistor no conduce** osea cuando el transistor esta en CUTOFF  que es cuando $V_{ds}=V_{fuente}$ entonces **no circula corriente**
	* $(3) \quad I_d= \frac{-1}{R}V_{fuente}+\frac{V_{fuente}}{R}=0$
	 ![](https://i.imgur.com/3rv43sr.png =400x)
[simulacion](https://tinyurl.com/yb8u3dar)


**Dibujando** los dos puntos obtengo una **recta** y a esta la llamamos **load line**
![](https://i.imgur.com/Ckx1LaQ.png =400x)
## Comportamiento del transistor

### Uso de load line para determinar $V_{gs}$ e $I_d$

La **load line** nos permite conocer todos los posibles comportamientos que **nuestro circuito particular** podria tener. Una vez que la tenemos podemos ver **que es lo que hara el transistor**  dentro de nuestro circuito para un cierto valor de $V_{gs}$

**Por ejemplo** 
* Dado un circuito dibujamos el **load line**
* Seleccioamos un un $V_{gs}$
*  **el transistor se comportara como indique la interseccion** y ese sera el $V_{ds}$ y $I_d$  

![](https://i.imgur.com/9hOCdWY.png =500x)
En la siguiente simulacion podemos ver como reduciendo la resistencia $R$ la corriente $I_{dmax}$ sube y eso hace aumentar $V_{ds}$
![](https://i.imgur.com/XXtCc3I.png)![](https://i.imgur.com/ff8SAOK.png)








## Ejemplos


La zona de operacion en la que esta el transistor **depende enteramente del circuito alrededor de este**

Principalmente depende de:
* La **corriente maxima** que puede **proveer el circuito** $I_{dmax}$
* La tension $V_{gs}$

### Circuito siempre en zona de saturacion

![](https://i.imgur.com/TBibpXp.png =800x)

 [Simulacion](https://tinyurl.com/ycbbm9gl)

 **este circuito puede proveer corriente infinita**
 

Si dibujamos el **load line** veremos que  $I_{dmax} \to \infty$ significa que el **punto final de la recta esta muuuy arriba, es casi vertical!**
Entonces siempre estaremos en saturacion ya que cualquiera sea el $V_{gs}$ que elijas siempre lo tocas en zona de saturacion

**Esto tiene sentido**: la corriente que el circuto desea hacer pasar ($I_{dmax}$) **es muuuuy superior a la corriente maxima que el transistor puede hacer pasar**, por ende siempre estara saturado.

![](https://i.imgur.com/iLtd0yc.png =300x)

>El motivo por el que al aumentar $V_{gs}$ en la simulacion veo un aumento de $I_d$ es por  **channel length modulation**, notamos que ese aumento de $I_d$es minusculo  comparado con la corriente $I_{dmax}$ maxima del circuito que habria si el transistor no estuviera, es decir **el transistor esta saturado**





### Circuito en ambas zonas
![](https://i.imgur.com/pt67LgP.png)[simulacion](https://tinyurl.com/y92qt72r)


En este circuito la corriente $I_{dmax}$ esta **limitada a un cierto valor por un resistor.**

Dibujando el **load line** veremos que para valores chicos de $V_{gs}$ la corriente $I_d$ que puede dar el transistor es mucho mas baja que la corriente maxima $I_{dmax}$ que puede dar el circuito, estamos en **saturacion**
![](https://i.imgur.com/kM670E6.png =300x)
A medida que aumentamos $V_{gs}$ nuestro $I_d$ **se va pareciendo mas y mas a la corriente maxima que puede dar el circuito**.

![](https://i.imgur.com/wu1MphA.png =300x)

# Uso de zona lineal

## Mosfet como resistencia fija
[fuente - Concepto de mosfet como resistor](https://www.youtube.com/watch?v=psm6z11gQHM&list=PLmK1EnKxphinxBub5hL0ZoJXWoqjkGE19&index=24)
[fuente - Load line](https://www.youtube.com/watch?v=UJkHL-6mn8s&list=PLwjK_iyK4LLBVM18VZ7JKW-q88FAtnr8_&index=90)


**Notamos que:**
En la zona lineal, con **variaciones de** $V_{ds}$ tenemos variaciones **casi lineales** de $I_d$. esto significa que en esta zona el MOSFET se comporta como una resistencia.
![](https://i.imgur.com/ifcXZzI.png =400x)_Vemos como un cambio en $V_{ds}$ genera un cambio *lineal* en $I_d$, este es el comportamiento de una **resistencia**_


  el valor de la resistencia lo llamaremos$R_{dson}$ y sera (obviamente) la **pendiente** del grafico de $V{ds}$ e $I_d$
  El valor de $R_{dsOn}$ depende unicamente de $V_{gs}$ ya que eso determina cual de las pendientes usas.

![](https://i.imgur.com/xLzY1dF.png =500x)


**Al ser una recta la pendiente es:**
$$\boxed{\frac{V_{ds}}{I_d}=\text{pendiente}=R_{dsOn} \quad \quad (\text{para un}  V_{gs} \text{ fijo }) }$$

A continuacion vemos como en una simulacion cambiando $V_{gs}$ la pendiente de $I_d$ y $V_{gs}$ cambia
![](https://i.imgur.com/P9BuydQ.png)[simulacion](https://tinyurl.com/y7yvxah4)

## Mosfet como resistencia variable

Meramente cambiando $V_{gs}$ mientras estoy en la zona lineal me permite elegir _cual pendiente_ quiero usar y eso me permite seleccionar un $R_{dsOn}$ a voluntad.

![](https://i.imgur.com/xLzY1dF.png =300x)
_Diferentes $R_{dsOn}$ posibles simbolizados como rectas de colores dependiendo del $V_{gs}$ elegido. Recordamos que $R_{dsOn}$ es la **pendiente** de cada recta de color_

**CRITICO:** que sea una resistencia variable no significa que $R_{dsOn}$ cambie **linealmente** con $V_{gs}$! es **variable** pero no **varia de forma lineal** como lo hace un potenciometro al girar la perilla
![ca](https://i.imgur.com/44fqb2l.png =400x)

A continuacion vemos como en una simulacion cambiando $V_{gs}$ la pendiente de $I_d$ y $V_{gs}$ cambia
![](https://i.imgur.com/P9BuydQ.png)
[simulacion](https://tinyurl.com/y7yvxah4)
## Mosfet como switch - ejemplo y calculo

#### Seleccion del mosfet

Cuando usamos un mosfet como un switch nuestra intencion es
* Reducir las **perdidas de potencia** al minimo
	* Es decir $V_{ds}*I_d\approx 0$
* Que la corriente $I_d$ que permite pasar el transistor **se parezca lo mas posible a la corriente maxima** que puede hacer pasar el circuito si el transistor no estuviera $I_{dmax}$
	* $I_{dmax}\approx I_d$ 

Donde mejor se da esto es en la **zona lineal**, donde tengamos una resistencia $R_{DsOn}$ lo **mas baja posible**.
**Para hacerlo** elegimos un MOSFET que tenga un $R_{dsOn}$ **bajito** segun el datasheet

**VEAMOS el grafico de un MOSFET diseñado para switching:**

![](https://i.imgur.com/Xa311cC.png)
_En este caso este mosfet esta diseñado para switching y por eso el fabricante te muestra mas que nada la zona lineal, que es la de interes._

**Notamos** que $R_{dsOn}$ es muy similar para todo valor de  $4V<V_{gs}<10V$ ya que **todas las pendientes se parecen.** 

Veamos el siguiente ejemplo donde $I_{dMax} \approx 2A$, veamos que sucede con el transistor segun el datasheet
![](https://i.imgur.com/DfpD4jU.png =400x.u.com/Dnn=)[EJEMPLO](https://tinyurl.com/yby5oas5)


Veamos el grafico del datasheet trazando el **load line** para sacar algunas conclusiones
![](https://i.imgur.com/ML6nzY2.png)
**vemos que:** 
* Cualquier $4V<V_{gs}<10V$ sera suficiente para que $I_d=2Amp$ este dentro de la zona lneal
* $V_{gs}< 4V$ podria no alcanzar
* $V_{gs}\approx 3V$ seguramente no alcanza

Ademas podemos aproximar el peor valor de $R_{dsOn}$ con la curva de menor pendiente, que es con  $V_{gs}=4V$

#### Calculo de reca

![]https://i.imgur.com/eNjbOv9.png)
Vemos que con $I_d=60$ tenemos $V_{ds}\approx 0.5V$ es decir que usando ley de ohm (que es basicamente obtener la pendiente)

$$\frac{V_{ds}}{I_{d}}=R_{dsOn}$$
$$\frac{0.5V}{60A}=R_{dsOn}=0.00833$$

Esta sera la **peor** $R_{dsOn}$, es decir **la mas alta**, ya que responde a la curva menos pronunciada por que elegimos usar la curva correspondiente a $V_{gs}=4V$, si usamos un valor mas alto de $V_{gs}$ tendremos un $R_{dsOn}$ un poco menor, que tambien podemos calcularlo usando el grafico.

#### Calculo de potencia disipada
[fuente](https://www.youtube.com/watch?v=56p3_aORiJ0&t=1032s)
Vemos ademas que con los datos que tenemos podemos calcular perfectamente la potencia que disipara el mosfet. recordamos que en nuestra aplicacion 
* La corriente maxima de nuestro circuito es $I_{dMax}\approx 2A$
* La resistencia es aproximadamente $R_{dsOn}=0.00833$ o menos si elegimos un $V_{s}$ mas alto

Calculando la potencia que disipa el transistor entonces
$$W_{transistor}=V_{ds}*I_d$$

$$W_{transistor}=0.5V*2A$$
$$W_{transistor}=1$$

#### Consideraciones practicas y problemas
[fuente 1](https://www.youtube.com/watch?v=u6UeaLh8nUY&list=PLb_ph_WdlLDny2cGloFSxyRgO8B733jeo&index=87)
Este sistema tiene los siguientes problemas:
* El **capacitor formado entre Gate y source** tiene una cierta capacitancia, si no limitas la corriente podes estar chupando **varios amperes** por **breves nanosegundos** (como pasa concualquier capacitor)
* El **capacitor formado entre Gate y source** se carga con muy poquita corriente, por lo que **se puede excitar con ruido ambiental o con estatica**

[EJEMPLO](https://tinyurl.com/yby5oas5)
![](https://.u.com/Fnn=)
#### Forma  minima funcional
[fuente 1](https://www.youtube.com/watch?v=o4_NeqlJgOs&t=290s)
[fuente 2](https://www.youtube.com/watch?v=56p3_aORiJ0&t=1032s)
Para solucionar los problemas en el apartado anterior, tenemos que:
* **limtar la corriente** que **carga el capacitor** entre **gate y source**
	* Con una resistencia de bajo valor alcanzarà, hay que tener encuenta la impedancia del circuito que activa el mosfet (ej un arduino puede dar hasta $40ma$ con sus $5V$, usa una resistencia que limite la carga del capacitor a $40ma$
* El capacitor se llena con poca carga, osea que **cualquier ruido o estatica lo puede activar**
	* Con una resistencia **pull down** que descargue el capacitor estamos bien (ej $10k\Omega$ )

[EJEMPLO](https://tinyurl.com/ydddzjjl)
![](https://i.imgur.com/KPJp2Vx.png)

## Control PWM

[fuente](https://www.youtube.com/watch?v=FCMzV7k8WEM&list=PLb_ph_WdlLDny2cGloFSxyRgO8B733jeo&index=89)

Se llama **Pulse Width Modulation** a la tecnica de prender y apagar la corriente para modificar la cantidad de potencia que se le da a un aparato. 

**Los pulsos imitan la forma de la onda original**
![](https://i.imgur.com/JFmEzHV.png)


**Se trata de exactamente el mismo principio que en los circuitos anteriores, pero:**
* Hay que accionar el mosfet **prendiendolo y apagandolo cada cierto tiempo**
	* Generalmente solucionado con un circuito digital como el arduino
	* Conviene **octoacoplar** el circuito de control para protegerlo
* Va a hacer falta una tension **DC pulsante** para accionar el mosfet
* La carga que maneja el mosfet seguramente sea una tension **DC rectificada sinusoidal, NO CONSTANTE**
	* **Nunca puede ser AC** por que el mosfet solo controla la corriente en una direccion
	* Para solucionar esto, interrumpimos la corriente **cuando es AC rectificada (osea DC tecnicamente hablando)** y se **transformara nuevamente en AC** cuando cruce el puente rectificador, entonce **colocamos la carga despues del puente rectificador**

[ejemplo](https://tinyurl.com/y8r3rqoy)
![](https://i.imgur.com/BTPkXvC.png)

## Switch bidireccional 

Podemos crear un switch bidireccional para dejar pasar o detener corriente AC usando el mismo principio, pero como **un mosfet solo puede controlar corriente en una direccion, necesitaremos DOS** y aprovechaermos el diodo interno.

![](https://i.imgur.com/zu7Sly2.png)
Simplemente:
* sacamos una rama AC y la recitificamos (en este caso, con un unico diodo alcanza)
* Generamos una **tension de referencia** de $5V$ con una fuente zener rectificada 
* Creamos un resistor que haga caer los $5V$
* usamos los $5V$ como $V_{gs}$ y interrumpimos la tension a voluntad con un octoacomplador para apagar el switch

>**NOTA:**
La tension de referencia se coloca entre los dos mosfets por que si te fijas bien, estan espejados, los **SOURCE** ambos miran hacia adentro, es decir hacia el cable con la tension de referencia


[ejemplo](https://tinyurl.com/yaadj5rw)
![](https://i.imgur.com/GUEdO3S.png)

## Problemas comunes 

### Accionamiento accidental por estatica o ruido
Como el transisotor deja pasar corriente cuando **se carga una capacitancia muy pequeña entre GATE y SOURCE** puede encenderse simplemente por **ruido o estatica**. para evitar eso usamos un **resistor a tierra** que se deshaga de ese tipo de señales.

$10k\Omega$ suele ser suficiente

![](https://i.imgur.com/t6gCAyr.png)
### Tension invertida / el body diode
[fuente](https://gansystems.com/newsroom/common-misconceptions-about-the-mosfet-body-diode/)
Aun cuando el MOSFET esta en **cutoff**, si lo polarizas al reves este **dejara pasar libremente la corriente!**

Esto es debido a la construccion de los mismos,  este fenomeno  se  modela con un **diodo**, aunque no significa que el transistor viene con un diodo  adicional, es simplemente como se comporta.

![](https://i.imgur.com/uAA4KPQ.png)

[Ejemplo](https://tinyurl.com/y93pszna)
![](https://i.imgur.com/MyBVeg8.png)
### PMOS, NMOS y ubicacion de la carga

[fuente](https://www.youtube.com/watch?v=yViDg5SJhck&t=4s)

Es importante recordar que
* un **N-MOS** controla la corriente de **SOURCE A DRAIN** 
* Un **P-MOS** controla la corriente de **DRAIN A SOURCE**
* **Ambos** usan como valor de control $V_{gs}$

Esto implica que **hay que ser cuidadoso** con donde pones la carga
* siempre la **carga** la tenes que colocar en el **DRAIN**
* **SOURCE** siempre tiene que estar ya sea a tierra o a la tension

Esto es por que **si colocamos la carga en el SOURCE en lugar del DRAIN** en esa carga se generara un potencial $V_s$.obviamente sabemos que

1. $V_{gs}=V_g-V_s$
2. Entonces si $V_s$ SUBE entonces $V_{gs}$ BAJA
3. Si $V_{gs}$ baja lo suficiente, se dara que que $V_{gs}<V_{th}$ y el mosfet pase a **CUTOFF**

Aca se puede ver como tomamos la referencia $V_{gs}$ para un **N-MOS** y para un **P-MOS**

[EJEMPLO](https://tinyurl.com/y9e3hnvj)
![](https://i.imgur.com/C9AEaM0.png)

Aca podemos ver para un **NMOS** como, si ponemos la carga en el **source** se genera una caida de tension en el ese resistor, osea que
*  $V_s$ en vez de ser $0V$ ahora toma el valor de la punta del resistor, osea $V_{s}=V_r$
*  aca vemos que $V_s=3.4$
* entonces como $V_{gs}=V_g-V_s$ se da que $V_{gs}=5-3.4$ $V_{gs}=1.6v$
* como $V_{th}=1.5V$, el transistor **a duras penas esta en conmutacion! y pasa poca corriente!**
* Si quisieras hacer esto con un **NMOS** tendrias que aplicar mas tension en el gate, puntualmente para que se cumpla  $V_{gs}>V_{th}$ tendrias que aumentar la tension de la **gate** hasta  $V_{g}=V_{th}+V_s$. 

[Ejemplo con un Nmos](https://tinyurl.com/yd9ednyb)
![](https://i.imgur.com/aVVk9gV.png)




### Uso de gate resistor en serie 

[fuente](https://www.youtube.com/watch?v=56p3_aORiJ0&t=183s)

Recordamos que el **gate** de un **mosfet** actua como un **CAPACITOR**, recordemos que si **cargamos un capacitor directaente**, este toma **INFINITA CORRIENTE** por brevisimo tiempo hasta que se cargue, o como decimos _actua como un switch cerrado hasta que se carga_

Entonces para no destruir nuestro circuito de control ponemos una resistencia acorde a la **corriente que el circuito de control puede proveer**, por ejemplo

**ARDUINO:** 
* max $40ma$ y $5V$
* La resistencia de gate sera 
	* $\frac{V}{R}=I$
	* osea la depsejamos de $\frac{5V}{R}=0.04A$

Notamos ademas que **cuanto mas chica la resistencia, mas rapido cargas el capacitor y mas rapido es la conmutacion del transistor** por lo que si necesitas hacer switching muy rapido, vas a necesitar un **driver circuit que pueda darle mucha corriente al gate por breves nanosegundos**


![](https://i.imgur.com/KPJp2Vx.png)









# Uso de zona de saturacion

## Amplificador basico
### Amplificacion - Concepto general
[fuente rigurosa](https://www.youtube.com/watch?v=jfizMWm3Q0I&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=4)

**RECORDAMOS:** En la **region de saturacion** la corriente que pasa por el mosfet es unicamente dependiente de la tension $V_{gs}$, es decir, es una **fuente de corriente controlada por tension**

$$\boxed{I_d (V_{gs}) \approx k\frac{1}{2}(V_{g}-V_{th})^2}$$
_a diferencia de la region ohmica, donde $I_d(V_{gs},V_{ds})$_

**ENTONCES:** Podemos aprovechar esa **fuente de corriente que no depende de ningun otro parametro** para crear un amplificador!.
 **Esa corriente $I_d$ se puede hacer pasar por un resistor para producir la tension de salida del amplificador usando ley de ohm.**

**Como:**
1.  la corriente de salida $I_d$ varia con variaciones de la entrada $V_{gs}$ 
2. La corriente de salida $I_d$ se puede transformar en tensiones arbitrarias usando ley de ohm para generar una tension de salida $V_o$
3. Tenemos un amplificador ([no lineal](https://electronics.stackexchange.com/questions/547839/how-is-a-mosfet-amplifier-useful)) $V_{gs}\to V_o$

![](https://i.imgur.com/SEXEH2A.png)
###  Biasing

#### Llevar al mosfet a saturacio
[fuente](https://www.youtube.com/watch?v=jfizMWm3Q0I&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=4)
Notamo que el amplificado propuesto en la introduccion tiene un problema, **no esta en la region de saturacion, esta en CUTOFF** por que la señal que queremos amplificar es chiquitita y por ende $V_{gs}<V_{th}$

Para arreglar esto hay que _montar_ $V_{gs}$ sobre una tension mas grande, para que todo quede 
* Fuera de cutoff, es decir $V_{gs}$ por encima de $V_{th}$
* En la region de saturacion, es decir No tan arriba como para que $V_{gs}>V_{ds}$, por que sino caemos en la region ohmica

**Esto define nuestro primer objetivo para la tension de biasing**
y podemos cumplirlo con un coupling capacitor que le acople la señal a una tension DC.

![](https://i.imgur.com/zfXDH5e.png)

#### Calculo de amplificacion
[fuente - minuto 26](https://www.youtube.com/watch?v=jfizMWm3Q0I&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=4)
**RECORDAMOS:** A partir de la equacion del transistor en saturacion puedo deducir cuanta corriente $I_d$ voy a tener de salida para una variacon de $V_{gs}$


$$\boxed{I_d (V_{gs}) \approx k\frac{1}{2}(V_{g}-V_{th})^2}$$

**A partir de esa corriente podemos decidir que resistor necesitamos para obtener la aplitud que queres usando la ley de ohm.**

$I_d=\frac{V_{picoDeseado}}{R}$

[ejemplo](https://tinyurl.com/yhd2s79g)
![](https://i.imgur.com/uftfvIP.png)

#### Seleccion del biasing point $V_{gs}$  y transductancia
[fuente - min 26](https://www.youtube.com/watch?v=jfizMWm3Q0I&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=6)

**RECORDAMOS** la **relacion de transferencia** del mosfet, que relaciona la entrada $V_{gs}$ con la salida $I_d$.

 vemos que como es una relacion cuadratica, tendremos **mas variacion de** $I_d$ por cada variacion de $V_{gs}$ si estamos **mas a la derecha** en el grafico

Esto implica que tendremos mas amplificacion cuanto mas a la derecha estemos, _(siempre manteniendonos en la zona de saturacion para que  nuestra amplificacion dependa de una sola variable $I_d(V_{gs})$ y no de dos variables como sucede en la zona ohmica  $I_d(V_{gs},V_{ds)}$)_

![](https://i.imgur.com/L5SgKpF.png =400x)


![](https://i.imgur.com/E9ndGL7.png =400x)
Observando nuestro grafico, notamos que **la derivada de la funcion** $I_d(V_{gs})$ **aumenta cuanto mas a la derecha estamos** (la pendiente es mayor)
 Eso se traduce en que estar _mas a la derecha_ en el grafico de  hace que las **pequeñas variaciones** de $V_{gs}$ generen **mayor variacion de** $I_d$, y eso determina cuan grande es la conversion.

![](https://i.imgur.com/lsgpT1A.png)
[Simulacion](https://tinyurl.com/yazsxj3o)

A su vez vemos la **caida de tension** en $R$, que **representa nuestra señal amplficada**

**ejemplos**
![](https://i.imgur.com/zrSvhdV.png =700x)![](https://i.imgur.com/0cK7muM.png =700x)

A esta propiedad la llamamos **transductancia** y la nombramos $g_m$


$$\large{\boxed{g_m=I_d'(V_{gs})}}$$
[fuente - min 50](https://www.youtube.com/watch?v=jfizMWm3Q0I&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=5) 
Elegir un punto mas a la derecha (de **mayor transductancia**) en el grafico implica las siguientes ventajas y desventajas con respecto a elegir un punto mas a la izquierda


**VENTAJAS:**

* **Un mayor** $I_d$, con el que es mas facil trabajar en general
*  **Una mayor amplificacion**, ya que para cada cambio de $V_{gs}$ los cambios en $I_d$ son mas dramaticos. 
	* Por que la derivada de $I_d(V_{gs})$ es mas grande a la derecha que a la izquierda

**DESVENTAJAS:**
La corriente de biasing circula constantemente aunque no estes amplificando nada, osea que  consumis energia al pedo.

**Glosario:**
* **biasing point** al punto de biasing elegido en el grafico
* **Biasing current** a la corriente que pasa constantemente por el dispositivo cuando no hay señal para amplificar
* **Biasing voltage** a la tension de biasing que aplicamos en $V_{gs}$ y sobre la cual se monta la señal 

![](https://i.imgur.com/g2PtEP6.png)
### Transductancia

#### Definicion
[fuente - min 50](https://www.youtube.com/watch?v=jfizMWm3Q0I&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=6) 
**Recordamos:**


![](https://i.imgur.com/E9ndGL7.png =400x)
**Retomando** del apartado anterior, notamos que **la derivada de la funcion** $I_d(V_{gs})$ **aumenta cuanto mas a la derecha estamos** (la pendiente es mayor)
 Eso se traduce en que estar _mas a la derecha_ en el grafico de  hace que las **pequeñas variaciones** de $V_{gs}$ generen **mayor variacion de** $I_d$, y eso determina cuan grande es la conversion.

A esta propiedad la llamamos **transductancia** y la nombramos $g_m$

$$(1)\quad  \large{\boxed{g_m=I_d'(V_{gs})}}$$

La tranductancia es entonces **cuan bien se transforma la tension de entrada $V_{gs}$ en corriente de salida $I_d$**
#### Formulas

[fuente - min 60](https://www.youtube.com/watch?v=jfizMWm3Q0I&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=6) 
[fuente 2](https://www.youtube.com/watch?v=LTNskDOVoHA&list=PLZvLSclgk4yKrq2nL1F49U9BXjCjMgxI3&index=10)
**FORMULA TRIVIAL**
La funcion $I_d$ para el mosfet en saturacion es

$$(2) \quad I_d (V_{gs}) =k\frac{1}{2}(V_{g}-V_{th})^2$$

La derivamos
$$I_d' (V_{gs}) =k(V_{g}-V_{th})$$
recordando la definicion de la transductancia $g_m$, la formula que obtuvimos es una expresion para la transductancia.
$$(3)\quad \large{\boxed{g_m =k(V_{g}-V_{th})}}$$

**FORMULA ALTERNATIVA  1:**
Conociendo $(3)$, podemos tratar de despejar ese valor a partir de la equacion $(2)$ para encontrar una formula alternativa para la transductancia

$(2)\quad I_d (V_{gs}) =k\frac{1}{2}(V_{g}-V_{th})^2$
_paso la fraccion para el otro lado y expando el cuadrado_
$2I_d  =k(V_{g}-V_{th})(V_{g}-V_{th})$
_paso el cuadrado dividiendo_
$\frac{2I_d}{(V_{g}-V_{th})}  =k(V_{g}-V_{th})$
_me quedo del lado derecho algo que por $(3)$ es igual a $g_m$_
$$(4)\quad \boxed{\frac{2I_d}{(V_{g}-V_{th})}  =g_m}$$

**FORMULA ALTERNATIVA  2:**
nuevamente, conociendo $(2)$ podemos despejar $(V_g-V_{th})$ y luego reemplazarlo en $(3)$
$$(2) \quad I_d (V_{gs}) =k\frac{1}{2}(V_{g}-V_{th})^2$$

despejo $(V_{g}-V_{th})$

$\sqrt{\frac{2I_d}{k}}  =(V_{g}-V_{th})$

Ahora lo reemplazo en $(3)$

$$(3)\quad g_m =k(V_{g}-V_{th})$$
$g_m =k\sqrt{\frac{2I_d}{k}}$
meto la $k$ adentro de la raiz cuadrada
$g_m =\sqrt{k^2}\sqrt{\frac{2I_d}{k}}$

$g_m =\sqrt{\frac{2I_d}{k}k^2}$
De esta manera queda la tercer formula para la transductancia
$$(5)\quad \large{\boxed{g_m =\sqrt{2I_dk}}}$$

**CONCLUSION**
hay 3 formulas para la transductancia y son


* $\large{\boxed{g_m =k(V_{g}-V_{th})}}$
* $\boxed{ g_m=\frac{2I_d}{(V_{g}-V_{th})} }$
* $\large{\boxed{g_m =\sqrt{2I_dk}}}$

#### Aparicion en datasheet

En [algunos mosfets](https://www.onsemi.com/pdf/datasheet/2n7002e-d.pdf) puede aparecer algun valor de referencia de transductancia en el datasheet
![](https://i.imgur.com/4mVEL4J.png)
Si nos referimos al datasheet, vemos que el fabricante nos da la transductancia (pendiente) del grafico de caracteristia de salida cuando $V_{ds}=5$ y $I_d=0.2A$

Observando el grafico de region de transferencia (izquierda) vemos que ese punto se da con un $V_{gs}=2.5$, viendo el grafico de **caracteristica de salida** (derecha) cuando $V_{gs}=2.5$ y $I_d=0.2A$ vemos que la transductancia que indica el fabricante es la pendiente de la lina rosa.

El fabricante probablemente eligio esos vaores por que al comportarse el grafico como una recta tenes la misma transconductancia en gran parte del grafico, pero en el valor dado por el fabricante hay un bajo $I_d$, lo cual es conveniente.
![](https://i.imgur.com/nwAtNgY.png)

### Diseño practico de amplificador

[fuente](https://www.youtube.com/watch?v=jfizMWm3Q0I&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=4)

**Criterios de diseño:**
* no queremos una corriente de biasing inmensa por que es un desperdicio de potencia
* Casi cualquier valor de $I_d$ se puede transformar en una tension arbitraria con un resistor lo suficientemente grande
* El mosfet convierte la señal $\Delta V_{gs}$ en una señal de corriente $\Delta I_d$, luego esa señal de corriente la pasamos por un resistor $R$. para transformarlo en una señal $\Delta V_R$ **la amplificacion depende en gran parte del valor del resistor**, por que por ley de ohm 
	* $\Delta I_d R=\Delta V_R$


**Metodo de diseño**
1. **mirar el grafico de transfer characteristics del datasheet**, el mosfet debe ser un mosfet para **pequeña señal**, sino es improbable que tenga caracteristicas utiles
2. **Elegir un bias point** (conbinacion de $V_{gs}$ y $I_d$)  que te sirva
	* Un bias current $I_b$ que puedas proveer con tu fuente / no te mate la bateria 
	* un $V_{gs}$ que te genere una pendiente copada **(transconductancia)** para mejorar la amplificacion 
![](https://i.imgur.com/SnLkqr9.png =300x)
3. **Aproximar con el grafico la variacion de** $\Delta I_b$, conociendo previamente  la variacion  $\Delta V_{gs}$ que va a tener tu señal, tambien **[muchas veces el fabricante te da el valor de transductancia mas conveniente](https://electronics.stackexchange.com/questions/605589/interpreting-the-value-of-transconductance-shown-in-a-mosfet-datasheet-why-was)** (menor $I_d$ para maxima   $\Delta V_{gs}$)
	* ![](https://i.imgur.com/TAuEXR6.png)
	* ![](https://i.imgur.com/4mVEL4J.png)
5. **Elegir la amplitud deseada de la salida** $V_R$. esto se hace eligiendo un  $R$ para que se cumpla la ley de ohm con el valor deseado  $\Delta I_d=\frac{\Delta V_{R}}{R}$
6. **cuidado**, si elegir una $R$ muy grande entonces  la corriente maxima del circuito $I_{dmax}$ puede hacese tan pequeña que el MOSFET puede pasar a la zona lineal.


![](https://i.imgur.com/os3cbZ7.png)
[Simulacion](https://tinyurl.com/ybk9hfka)


# Modelos de MOSFET
## Modelo de gran señal
[fuente 1 razavi - min 48](https://www.youtube.com/watch?v=LvE0curDf_Q&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=5)

### Definicion
Es el modelo visto hasta ahora, donde usamos las equaciones "normales" del MOSFET que vimos hasta ahora.

**Este modelo consiste en las clasicas equaciones ya conocidas:**


* Para saturacion:
	*	$(1) \quad \boxed{I_d (V_{gs}) \approx k\frac{1}{2}(V_{g}-V_{th})^2  (1+\lambda V_{ds})}$
	* _o en su version simplificada sin channel length modulation_
$(2) \quad \boxed{I_d (V_{gs}) \approx k\frac{1}{2}(V_{gs}-V_{th})^2 }$
* Para zona lineal:
	* $(3) \quad \boxed{I_d (V_{gs},V_{ds}) \approx k((V_{gs}-V_t)V_{ds}-\frac{1}{2}V_{ds}^2)}$



### Ejemplo de uso
**Intentemos utilizarlo en un caso practico**
![](https://i.imgur.com/gxpl2In.png =200x)

* **Conocemos:**
	* $\color{blue}K$ - (cuando nosotros diseñamos el mosfet)
	* $\color{blue}R$ - La resistencia del circuito
	* $\color{blue}V_{th}$ - es una caracteristica del MOSFET
	* $\color{blue}V_{g}$ - la tension de la FUENTE en el gate
* **No conocemos:**
	* $\color{red}V_{gs}$ - por que hay una caida en el resistor $R$
	* $\color{red}I_d$
	* $\color{red}V_{ds}$

Veamos como solucionarlo usando el modelo.

 **PRIMERO** asumimos que el MOSFET esta en **saturacion** y decidimos **ignorar el channel length modulation**, es decir que usaremos la equacion $(2)$
$\textcolor{red}{I_d} \approx \textcolor{blue}k\frac{1}{2}(\textcolor{red}{V_{gs}}-\textcolor{blue}{V_{th}})^2$

**LUEGO** por KVL notamos que 
$(4)\quad \textcolor{red}{V_{gs}}=\color{blue}V_{g}-R\color{red}I_d$
![](https://i.imgur.com/EzJgDKQ.png =200x)
**ENTONCES** Reemplazando $(4)$ en $(2)$
$\textcolor{red}{I_d} \approx \color{blue}k\frac{1}{2}(V_{g}-R\textcolor{red}{I_d}-V_{th})^2$
**Ahora podemos despejar $I_d$!**
_despeje omitido para mas simplicidad_

**FINALMENTE** habiando obtenido $\color{blue}I_d$ podemos despejar $\color{red}V_{gs}$ de $(2)$

$\textcolor{blue}{I_d} \approx \textcolor{blue}k\frac{1}{2}(\textcolor{red}{V_{gs}}-\textcolor{blue}{V_{th}})^2$

despejando queda el valor de 
$\textcolor{red}{V_{gs}}=\color{blue}\sqrt{\frac{2I_d}{k}}+V_{th}$

### Simbologia simplificada

Se utiliza la siguiente simbologia, donde se reemplaza el mosfet por una fuente de corriente. se asume que el mosfet se va a usar en saturacion por lo que se usa la equacion de saturacion. 


$I_d (V_{gs}) \approx k\frac{1}{2}(V_{gs}-V_{th})^2$

![](https://i.imgur.com/wwAnm8s.png)

## Modelo de pequeña señal - WIP

### Intuicion

[fuente 1 razavi - min 48](https://www.youtube.com/watch?v=LvE0curDf_Q&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=5)

Este modelo es una simplificacion sencilla.

>**Recordamos que:**
Cuando estamos usando el MOSFET como amplificador, primero elegimos un **bias point** y luego hacemos **pequeñas variaciones** $\Delta V_{gs}$ que generan variaciones de $\Delta  I_d$
![](https://i.imgur.com/E9ndGL7.png =400x)
A la pendiente (derivada) del grafico en ese bias point  le decimos **transductancia** 
$$  g_m=\frac{\Delta i_d}{\Delta V_{gs}}$$

**El modelo de pequeña señal nos dice:**
Una vez que elegiste un bias point $I_b$ y $V_{gs}$,  si tu **señal** son cambios chiquititos $\Delta V_{gs}$ entonces podes aproximar $\Delta I_d$ usando la **derivada del grafico** (transductancia)
>_esto no es complicado, es **trivial**_

**Entonces:**

$$\boxed{\large{\Delta I_b\approx g_m*\Delta V_{gs}}}$$


>**CONCLUSIONES:**
>Esto significa que **una vez que tenemos nuestro bias point** es muy sencillo calcular **el cambio de corriente** en base al **cambio de tension** de la señal.
_Recordamos que tenemos 4 formulas diferentes para encontrar $g_m$ por lo que cualquiera sea nuestro caso no es dificil de hallar_
**AHORA EL COMPORTAMIENTO DE LA SEÑAL DE ENTRADA Y SALIDA ES LINEAL Y FACILISIMO!**

Vemos que obviamente, para que la derivada sea una aproximacion mas o menos valida, $\Delta V_{gs}$ tiene que ser chiquito. mas especificamente vemos que tiene que ser chiquito comparado con $V_{gs}$. es decir que solo podemos usar el modelo de pequeña señal si
$$\boxed{\large{\Delta V_{gs} \lll V_{gs}-V_{th}}}$$

![](https://i.imgur.com/hMem80l.png =400x)
Es decir, **la señal tiene que ser mucho mas chica que la tension de bias UTIL para excitar el mosfet** (la tension por debajo de $V_{th}$ no cuenta por que no colabora al cambio del comportamiento de $I_b$)


### Nociones de aplicacion


[fuente 1 razavi - min 48](https://www.youtube.com/watch?v=LvE0curDf_Q&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=5)

El modelo de pequeña señal se usa en conjunto con el modelo de gran señal.

* **Modelo de gran señal:** lo usamos para determinar nuestro bias point
* **Modelo de pequeña señal:** lo usamos para definir la ganancia del transistor (la amplitud de corriente $\Delta I_b$ que tenemos para una amplitud de señal $\Delta V_{gs}$)

**Veamos un ejemplo con el siguiente circuito:**

![](https://i.imgur.com/QpDEccf.png =300x)
[simulacion](https://tinyurl.com/y7chj88v)
**PRIMERO** aplicamos el modelo de gran señal, y lo hacemos ignorando nuestras señales pequeñas![](https://i.imgur.com/Kn5uvBx.png =300x)
De esta manera obtenemos $I_b$ de bias

**DESPUES:** calculamos la tranductancia $g_m$ para esa corriente de bias $I_b$

**FINALMENTE** aplicamos el modelo de pequeña señal, en el que calculamos que cambio de corriente $\Delta I_b$ que habra para el cambio $\Delta V_{gs}$ que se inserta en el circuito 


![](https://i.imgur.com/hceOJqG.png)

### Aplicacion practica - WIP

[fuente](https://www.youtube.com/watch?v=HviPXCkrdXg&list=PLunAuxHqEAijgoKKoo7aYYvXtjiVwbin5&index=6)



# Consideraciones


## Efecto miller y mosfet drivers - WIP

### Introduccion

**Recordamos:** que un MOSFET funciona como un interruptor activado por la carga o descarga de un capacitor entre **gate y source** $C_{gs}$

![](https://i.imgur.com/Qoqev6r.png =300x)

**El efecto miller o capacitancia de miller** es un fenomeno causado por la **capacitancia parasita de miller** que se produce entre **gate y drain**, por consiguiente la llamaremos $C_{gd}$

![](https://i.imgur.com/i8X498Z.png =300x)

**Notamos que:** 
1. Para activar el MOSFET necesitamos subir la tension de gate $V_g$
2. $V_g$ solo subira si cargamos los dos capacitores $C_{gd}$ y $C_{gs}$
3. La capacitancia de miller $C_{gd}$  nos **retrasa el encendido y apagado del mosfet**

### Capacitancia $C_{gd}$ y su dependencia a $V_{ds}$ - WIP
[Fuente](https://www.youtube.com/watch?v=1XqyrAgMQVc&t=258s)


**notemos que:**
* $V_{d}$ es generalmente la **tension de alimentacion** y puede ser
	*  **MUY ALTA en cutoff** (ej $200V$)
	* **MUY BAJA  en conduccion** ( $\approx 0V$)
* $V_{g}$ es la tension de control, que puede ser
	* $0V$ cuando el mosfet esta apagado
	* $+-10V$ cuando el mosfet esta encendido

**ENTONCES:**
Vemos entonces que $V_{dg}$ varia muchisimo y  hasta cambia de polaridad!, Analicemos como afecta esto en la carga $Q$ necesaria para cargar los capacitores

>**Recordemos que:**
Por la equacion del capacitor
$$C_{dg}=\frac{Q}{V_{dg}}$$
Podemos calcular la carga necesaria para cargarlo totalente asi
$$Q_{dg}=C_{dg} V_{dg}$$

**TRANSISTOR NO CONDUCIENDO:**
Con el mosfet apagado, el capacitor $C_{dg}$ esta cargado, debido a que $V_{d}$ es alto y $V_{g}$ es bajo.
Para encender el transistor tendremos que **remover esta carga**, calculemosla:
$$Q_{dg}=C_{dg} (V_{dOFF}-V_{gOFF})$$

$$Q_{dg}=C_{dg} (V_{dOFF}-0)$$

$$\boxed{Q_{dg}=C_{dg} V_{dOFF}}$$
_por ejemplo_
$Q_{dg}=C_{dg} 600V$


![](https://i.imgur.com/CPi2ERt.png =400x)
**TRANSISTOR CONDUCIENDO**


Luego que descargue el capacitor tengo que **cargarlo al reves** por que  deseo que $V_{g}$ suba ($10V$)y que $V_d$ baje ($0V$)
$$Q_{dg}=C_{dg} (V_{dON}-V_{gON})$$

$$\boxed{Q_{dg}=C_{dg}(-V_{gON})}$$

_por ejemplo_
$$Q_{dg}=C_{dg}(-(-10V))$$

![](https://i.imgur.com/ybIlcHL.png  =400x)


**CONCLUSION:**
**En total** tengo que movilizar la suma de las dos cargas para poder  cargar ambos capacitores y asi elevar $V_{g}$ y encender el mosfet
$$\boxed{Q_{dg}=C_{dg} V_{dOFF}+C_{dg}V_{gON}}$$

**CRITICO:** La cantidad de carga $Q_{dg}$ que necesitamos proveer **varia fuertemente con la tension** $V_{d}$ entonces **la "capacidad percibida" depende de la tension**

Por eso decimos que la capacitancia de miller **"no es lineal"** sino que cambia con la tension $V_{ds}$.

### Capacitancia total $C_{g}$



Pero aun nos falta calcular la carga para llenar el otro capacitor $C_{gs}$, afortunadamente esta capacitancia tiene en sus extremos $V_{g}$ y $V_{s}$, que tienen estados muchos mas sencillos

* **TRANSISTOR CONDUCIENDO**
	* $V_{s}=0$ por que esta a tierra
	* $V_{g}=10V$ o a la tension de control que deba estar
* **TRANSISTOR NO CONDUCIENDO**
	* $V_{s}=0$ por que esta a tierra
	* $V_{g}=0$ 

Esto implica que para cargar el capacitor necesitare simplemente una carga de 
$Q_{sg}=C_{sg} (V_{s}-V_{gON})$
$Q_{sg}=C_{sg} (0-V_{gON})$

$$\boxed{Q_{sg}=C_{sg} V_{gON}}$$


Entonces, sumando $Q_{sg}$ que calculamos recien y $Q_{gd}$ podemos obtener la **carga total** $Q_{t}$ necesaria para switchear el transistor totalmente.


**Recordamos que**
$$\boxed{Q_{dg}=C_{dg} V_{dOFF}+C_{dg}V_{gON}}$$

**sumamos:**
$$Q_{sg}+Q_{dg}=C_{sg} V_{gON}+C_{dg} V_{dOFF}+C_{dg}V_{gON}$$
Algo de algebra
$$Q_{t}=V_{gON}(C_{sg} +C_{dg} \frac{V_{dOFF}}{V_{gON}}+C_{dg})$$

**Obtenemos una expresion para la cantidad de carga durante el switch-on del MOSFET**
$$\boxed{Q_{t}=V_{gON}(C_{sg} +C_{dg} (\frac{V_{dOFF}}{V_{gON}}+1))}$$

**NOTAMOS QUE**  $V_{dOFF}$ es por lejos el **valor mas grande** (ej $600V$) por que es la tension de la fuente! entonces casi toda la carga esta principalmente definida por $V_{ds}$


![](https://i.imgur.com/CPi2ERt.png =300x)

### Millers plateau - WIP
[Fuente 0 - Mosfet gate charge curve LA fuente!](https://www.youtube.com/watch?v=1XqyrAgMQVc&t=258s)
[Fuente 1 - Mosfet turn on characteristics](https://www.youtube.com/watch?v=RViwOc4g-gw&t=120s)
[Fuente 2 - Aplication note 1](https://www.vishay.com/docs/68214/turnonprocess.pdf)
[Fuente 3 - Aplication note 2](https://www.vishay.com/docs/73217/an608a.pdf)



[Ejemplo](https://tinyurl.com/y5vfv253)
![](https://i.imgur.com/AG6PJIz.png)




# Calor y disipacion

### Introduccion

[fuente](https://www.youtube.com/watch?v=x8nKy71afas&list=PLb_ph_WdlLDny2cGloFSxyRgO8B733jeo&index=92)
Un semiconductor esta encapsulado en una carcasa.

Por cuestiones termodinamicas, el calor fluye de **lugares de mas teperatura a lugares de menos temperatura**, para lograr disipar el calor del semiconductor y que este no se destruya, debemos **mantener la temperatura del encapsulado baja** para que **el calor fluya del semiconductor a su encapsulado mas rapidamente**, y de este al aire

$$\text{semiconductor }80° \to \text{encapsulado } 70° \to \text{aire } 25°$$
**CUANTO MAS FRIO EL ENCAPSULADO CON RESPECTO AL SEMICONDUCTOR**
$$\text{semiconductor 60°} \Rightarrow \Rightarrow\text{encapsulado 30°} \to \text{aire 25°}$$


Esto lo hacemos con un **disipador**, que permite **mantener el encapsulado frio por conveccion** y eso **facilita la transmision de calor desde el semiconductor al encapsulado por conduccion**

$$\text{semiconductor } \Rightarrow \Rightarrow\text{encapsulado } \to \text{disipador} \to\text{aire }$$


### Union transistor-disipador

En general por como se construyen los transistores,  la parte metalica del encapsulado esta en contacto electrico con el **colector**.

![](https://i.imgur.com/JTWcyZg.png)

Es importante entonces **aislar electricamente el metal del transistor del metal del disipador** con un material que sea **buen transmisor termico**. 
Para facilitar la conduccion del calor, usamos un poco de **pasta termica**

_Existen transistores aislados en los que esto no es un problema_

![](https://i.imgur.com/C8Hmvn9.png)

Ademas utilizamos para el agarre mecanico, un tornillo, una arandela aislada y una tuerca
![](https://i.imgur.com/ahD51j2.png)




### Calculos de disipacion

[fuente](https://www.youtube.com/watch?v=x8nKy71afas&list=PLb_ph_WdlLDny2cGloFSxyRgO8B733jeo&index=92)

Incialmente, el fabrcante te indica una **temperatura** $T_{jMax}$ (max junction temperature) que  es la m**axima temperatura que el semicondutor interno puede sostener sin destruirse**, Cuanto mas baja sea la temperatura$T_{j}$ de nuestro transistor, **mas vida util tendra**

**Para calcular la disipacion de un semiconductor debemos considerar**
* La potencia disipada en $Watts$, que son $\frac{joules}{sec}$
	*  esta misma unidad indica **calor** generado ($joules$) por segundo
* La **resistencia termica** $R_{th}$, que indica **la cantidad de julios por segundo necesaria para mantener una temperatura** 
	* $R_{th}=\frac{C}{W}$, esta esta en el datasheet del semiconductor

**Naturalmente entonces:**

$$Temp=R_{th}*W=\frac{C}{W}*W$$

A esa temperatura le **debemos sumar la temperatura ambiente**
$$Temp=R_{th}*W=\frac{C}{W}*W + 25°$$


### Diseño y seleccion de componentes

Para proceder a diseñar nuestra solucion de disipacion

* **Elegimos la temperatura objetivo**
	* Verifiamos $T_{jMax}$![](https://i.imgur.com/cjXIwWY.png =200x)
	* Aplicamos un **coeficiente de seguridad** para que nuestro calculo haga que el transistor se quede bastante por debajo de $T_{jMax}$
	* $0.5$ como coeficiente estandar a temperatura ambiente
	*  $06$ si necesitamos usar un disipador chico
	*  $0.7$ si el disipador esta vertical y en el exterior
* **Calculamos las temperaturas sin disipador**
	* Verificamos la resistencia termica entre el semiconductor y el ambiente $R_{JA}$ (juncation-ambiente)
	* ![](https://i.imgur.com/Wvui9vc.png)
	* Calculamos la temperatura sin dsipador
		* $Temp=R_{JA}*W_{disipada} + T_{ambiente}$
		* $Temp=57*W_{disipada} + 25°$
	* La temperatura es aceptable?
		* **SI:** listo!
		* **NO:** calculo con un disipador
* **Calculamos la temperatura con un disipador**
	*  Verificamos la resistencia termica entre el semiconductor y el   encapsulado $R_{JC}$ (juncation-case)
	* ![](https://i.imgur.com/G1pxCLa.png)
	* Identificamos la resistencia termica de la union con mica  $R_{cd}$ (case-disipator)
		* Depende de muchos factores (si se usa mica, si se usa pasta, el tipo de encapsulado)
		* ![](https://i.imgur.com/DOJi76f.png)
	* Identificamos la resistencia termica entre el disipador y el ammbiente $R_{da}$ (disipator-ambient)
		* Dependera de que dsipador elijamos, este valor esta en el catalogo
		* Los valores tipicos  de $R_{da}$ suelen ser para una diferencia de temperatura entre el disipador y el ambiente de $60°$, caso contrario hay factores de correccion
		* ![](https://i.imgur.com/InmNITS.png)
		* Se debe usar un coeficiente dependiendo de la posicion del disipador, tambien en el catalogo, tal que $R_{daFinal}=\frac{R_{da}}{k}$, vemos que entonce **mayor coeficiente es mejor**
		* ![](https://i.imgur.com/ZGqwal2.png)
	* **Calculamos**
		* $$T=W*R_{JC}+W*R_{cd}+(W*R_{da}*K_{factor de correcion}*K_{coeficiente de posicion}) + T_{amb}$$
	* **Si  necesitamos un disipador mas chico o temperaturas mas bajas usamos un ventilador**
* **Calculamos la temperatura con disipador y ventilador**
	* Un ventilador permite usar un disipador mucho mas pequeño, la disipacion siempre se computa con un flujo de aire en forma longitudinal
	* ![](https://i.imgur.com/qyFO8jD.png)
	* El catalogo del disipador debe poseer valores de $R_{da}$ mucho mas bajos para alguos ejemplos de velocidades de aire cuando se usa un ventilador
	* ![](https://i.imgur.com/ucIWYCi.png)
	* Elegimos un ventilador que provea una velocidad de aire similar a la indicada en el catalogo.
	* En el catalogo de ventiladores nos suele indicar las dimensiones y el volumen de aire desplaado, con eso podemos calcular la velocidad del aire.
	* ![](https://i.imgur.com/kY7zH6d.png)

### Analogia con ohms law y multiples componentes
[fuente](https://www.youtube.com/watch?v=8ruFVmxf0zs)
Podemos hacer una analogia del analisis termico con el analsis  de  circuitos
* $W_{disipada}$ seria la corriente
* $R_{th}$ resistencias termicas serian como resistencias
* $V_{th}$ voltaje termico seria temperatura

Las formulas vistas anteriormente no son mas que un circuito de este tipo

$$T_j=W*R_{JC}+W*R_{cd}+W*R_{da} + T_{amb}$$
![](https://i.imgur.com/XKpGGJW.png =300x)

Sabiendo esto podemos resolver que heatsink necesitamos para varios componentes colocados en un mismo heatsink.
![](https://i.imgur.com/zBOsjiu.png)



## Como elegir un mosfet - WIP

[FUENTE](https://www.youtube.com/watch?v=jEWpVKkV3Qo&t=85s)

Para elegir un mosfet tenemos que tener en cuenta los siguientes elementos

* $V_{ds}$ maximo (pico a pico)
* $V_{gs}$ maximo (pico a pico si es AC) que vamos a aplicar
* $I_d$ maxima (pico a pico)
* $R_{dsOn}$ que nos sirva para nuestro diseño
* $V_{gs}$ de activacion
	* Los mosfets  logicos en general se activan con $5V$
	* Los power mosfets se activan con $5V-10V$



# JFET - WIP

[ver, explicacion y circuitos comunes aca](https://www.youtube.com/watch?v=PAsQYiWP7sg&list=PLveP8oiH14b5FbY_Aho6lfsi37AU-L7cS)
[Ver, explicacion y circuitos comunes 2](https://www.youtube.com/watch?v=dJx0VZfW6J8&list=PLC7117B136C379C6E&index=3)

[ejemplo JFET](https://tinyurl.com/ybj3947f)


 Amplificadores - WIP

[ver](https://www.youtube.com/watch?v=vE_bQivEVuE&list=PLuzS0jdNRVvocxP2rQjT0EL0mqcoB1JLV)
<!--stackedit_data:
eyJoaXN0b3J5IjpbMzUzMjI3NDczLDE1NTc4NTE4NDAsLTUxNj
QxNDAzMCwtMTc0Njc1MzgyNyw2Nzg1MTkzNzQsMTkyOTc2NDAw
NCwxNDEzMjUyOTksLTIwNzI4OTM4NDQsLTE4OTgyMTkwNjgsLT
EwMzkwNzAzMjEsLTY4MDk2ODY3LDIwMDg0NzE0NjAsMTM3NjA0
MTQ5NywxMzA5MjMxODUyLC00MjgyMjM2MzYsLTE1NzQ0OTQwNy
wtMzE1NTczNTExLDkxODA3ODMxNiw5OTI2MDUyNDcsNDM4Njk4
NzQzXX0=
-->